<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>â˜• | Nodes | FeatureBase AI</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- Fixed Header -->
<nav class="navbar navbar-expand-lg fixed-top" style="opacity: 90%;">
    <img src="/static/fb.png" style="height: 1.5rem; width: auto; margin-right: 10px;"> 
    <h2 style="font-family: Roboto,sans-serif; color: #ffffff; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); margin: 0;">FeatureBase AI</h2>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    {{username}}
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                    <a class="dropdown-item" href="/logout">Logout</a>
                </div>
            </li>
        </ul>
    </div>
</nav>

<!-- Left Sidebar Navigation -->
<div class="sidebar">
    <!-- Include your sidebar links here -->
</div>

<!-- Left Sidebar Navigation -->
<div class="sidebar">
    <a href="/pipelines">
        <i class="fas fa-code-branch"></i> Pipelines
    </a>
    <a href="/nodes" class="highlighted-link">
        <i class="fas fa-coffee"></i> Nodes
    </a>
    <a href="/templates">
        <i class="fas fa-pen"></i> Templates
    </a>
    <a href="/tasks">
        <i class="fas fa-tasks"></i> Tasks
    </a>
    <a href="/settings">
        <i class="fas fa-cog"></i> Settings
    </a>
</div>

<!-- Main Content -->
<div class="content container mt-5 pt-5">
    {% for message in get_flashed_messages() %}
        <div id="tempNotice" class="alert alert-info d-none" role="alert">{{ message }}</div>
    {% endfor %}
    
    <h2 class="page_heading">Nodes</h2>

    <div class="card rounded-lg">
        <div class="card-body">
            <h4 class="card-title card-callout">Current Nodes</h4>
			<p class="card-text">Nodes that are currently registered and that can be used in pipelines:</p>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Model</th>
                            <th>Input</th>
                            <th>Ouptput</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for node in nodes %}
                        <tr>
                            <td>{{ node.name }}</td>
                            <td>{{ node.method }}</td>
                            <td>{{ node.extras.model }}</td>                            
                            <td>{{ node.input_keys }}</td>
                            <td>{{ node.output_keys }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
        </div>
        <div class="card-body">
            <h4 class="card-title card-callout">Embedding Nodes</h4>
			<p class="card-text">Embedding nodes create dense vectors for text sent to table endpoints:</p>
			<p class="card-text">
				<ul>
                {% for node in nodes %}
                    {% if node.kind == 'embedding' %}
                        <li>{{ node.name }}</li>
                    {% endif %}
                {% endfor %}
				</ul>
			</p>
			<p class="card-text">A common application of text embeddings is measuring text similarity. The resulting vectors from these types of nodes can be weighted to quantify how similar or dissimilar texts are to each other.</p>
        </div>
        <div class="card-body">
            <h4 class="card-title card-callout">Question Nodes</h4>
            <p class="card-text">Question nodes form questions about the text that is ingested:</p>
            <p class="card-text">
                <ul>
                {% for node in nodes %}
                    {% if node.kind == 'form_question' %}
                        <li>{{ node.name }}</li>
                    {% endif %}
                {% endfor %}
                </ul>
            </p>
            <p class="card-text">A common application of text embeddings is measuring text similarity. The resulting vectors from these types of nodes can be weighted to quantify how similar or dissimilar texts are to each other.</p>
        </div>
        <div class="card-body">
            <h4 class="card-title card-callout">Keyterm Nodes</h4>
			<p class="card-text">Keyterm nodes create keyterms for text sent to table endpoints:</p>
			<p class="card-text">
				<ul>
                    {% for node in nodes %}
                    <tr>
                        <td><a href="/nodes/{{ node.node_id }}">{{ node.name }}</a></td>
                        <td>{{ node.method }}</td>
                        <td>{{ node.extras.model }}</td>
                        <td>
                            {% for input_key in node.input_keys %}
                                {% for key, value in input_key.items() %}
                                    <span class="badge badge-dark">{{ key }}: {{ value }}</span>
                                {% endfor %}
                            {% endfor %}
                        </td>

                        <td>
                            {% for output_key in node.output_keys %}
                                {% for key, value in output_key.items() %}
                                    <span class="badge badge-dark">{{ key }}: {{ value }}</span>
                                {% endfor %}
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <p></p>
    <button type="button" class="btn btn-dark" data-toggle="modal" data-target="#nodeFormModal">
        Add Node
    </button>
</div>

<!-- Bootstrap JS, Popper.js, and jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>


<script type="text/javascript">
$(document).ready(function() {

});
</script>

</script>
</body>
</html>
